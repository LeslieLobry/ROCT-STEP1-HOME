import fs from "node:fs/promises"; import path from "node:path"; import matter from "gray-matter"; import { bundleMDX } from "mdx-bundler"; const root=process.cwd(); export async function listActus({limit}={}){const dir=path.join(root,"content/actualites"); const files=(await fs.readdir(dir)).filter(f=>f.endsWith(".mdx")); const posts=await Promise.all(files.map(async f=>{const raw=await fs.readFile(path.join(dir,f),"utf8"); const {data}=matter(raw); return data;})); const sorted=posts.sort((a,b)=>new Date(b.date)-new Date(a.date)); return typeof limit==="number"?sorted.slice(0,limit):sorted;}